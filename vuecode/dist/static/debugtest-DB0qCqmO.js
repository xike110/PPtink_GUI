import{M as X,N as Y,R as N,r as d,b as u,x as p,e,W as Z,g as y,F as g,l as _,p as f,t as v,i as x,v as $,A as ee,_ as ae}from"./zh-cn-C3gtzjIZ.js";const te={class:"second-home"},se={class:"mac-window"},ie={class:"mac-content"},oe={class:"button-grid"},ne=["onClick"],le={key:0,class:"test-result"},ce={class:"mac-alert-icon"},ue={class:"alert-content"},pe={class:"mac-alert-title"},ve={key:1,class:"app-gen-dialog-backdrop"},de={class:"app-gen-dialog"},re={class:"app-gen-dialog-body"},we={class:"form-group"},fe={class:"form-group"},be={class:"app-gen-dialog-footer"},me=["disabled"],ye={key:2,class:"app-gen-dialog-backdrop"},ge={class:"app-gen-dialog"},_e={class:"app-gen-dialog-body"},he={key:0,class:"migration-info"},ke={class:"mac-alert info"},De={class:"mac-alert-content"},Ne={class:"mac-alert-description"},xe={class:"migration-list"},$e={class:"migration-item-header"},Ce={class:"migration-item-name"},Pe={class:"migration-item-path"},Te={class:"migration-path"},Ve={class:"path-value"},Ae={class:"migration-path"},Ge={class:"path-value"},Re={key:1,class:"mac-alert error"},Se={class:"mac-alert-content"},Be={class:"mac-alert-description"},Fe={class:"app-gen-dialog-footer"},Ie=["disabled"],Me=X({__name:"debugtest",setup(We){const C=Y(),P=N("formData",d({input:"",select:"",switch:!1,textarea:""})),b=N("currentTheme",d("light")),t=d(""),o=d("info"),r=d(!1),l=d({srcDirName:"WebDemo",newDirName:""}),w=d(!1),c=d({success:!1,message:"",data:[],count:0,types:{catalogue:0,file:0}});function T(s,a){const i=["primary","success","warning","danger","info"],n=((s-1)*4+a-1)%i.length;return i[n]}function h(s,a){const i=["获取版本","检查更新","打开文件","保存文件","数据导入","数据导出","图片处理","语音识别","窗口截图","网络请求","消息通知","打印文档","用户登录","打包迁移","生成应用","获取主题"],n=(s-1)*4+(a-1);return i[n]}function V(s,a){const i=(s-1)*4+(a-1),n=h(s,a);console.log(`测试功能: ${n}, 索引: ${i}`);try{switch(i){case 0:A();break;case 1:G();break;case 2:R();break;case 3:S();break;case 4:B();break;case 5:F();break;case 6:I();break;case 7:M();break;case 8:W();break;case 9:U();break;case 10:q();break;case 11:E();break;case 12:L();break;case 13:j();break;case 14:O();break;case 15:J();break}o.value="success"}catch(m){console.error(`测试功能出错: ${m}`),t.value=`${n} 测试失败: ${m}`,o.value="error"}}function A(){t.value="当前版本: v1.0.0",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","获取版本测试")}function G(){t.value="已是最新版本",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","检查更新测试")}function R(){t.value="已打开文件: example.txt",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","打开文件测试")}function S(){t.value="文件已保存到: /documents/example.txt",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","保存文件测试")}function B(){t.value="成功导入数据: 100条记录",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","数据导入测试")}function F(){t.value="数据已导出到: /documents/data.xlsx",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","数据导出测试")}function I(){t.value="图片处理完成，已保存",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","图片处理测试")}function M(){t.value='语音识别结果: "你好，世界"',typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","语音识别测试")}function W(){t.value="截图已保存到剪贴板",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","窗口截图测试")}function U(){t.value="请求成功，状态码: 200",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","网络请求测试")}function q(){t.value="通知已发送",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","消息通知测试")}function E(){t.value="文档已发送到打印队列",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","打印文档测试")}function L(){t.value="用户已登录: admin",typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","用户登录测试")}function j(){w.value=!0,typeof pywebview<"u"&&pywebview.api?(pywebview.api.log("info","打开打包迁移对话框"),pywebview.api.get_package_migration_info().then(s=>{c.value=s,s.success?(t.value="获取打包迁移信息成功",o.value="success"):(t.value=s.message||"获取打包迁移信息失败",o.value="warning")}).catch(s=>{c.value={success:!1,message:`获取打包迁移信息失败: ${s}`,data:[],count:0,types:{catalogue:0,file:0}},t.value=`获取打包迁移信息失败: ${s}`,o.value="error"})):(c.value={success:!0,message:"获取打包迁移信息成功（模拟）",data:[{name:"缓存目录",type:"catalogue",from_path:"/cache",to_path:"/output/main/cache"},{name:"日志目录",type:"catalogue",from_path:"/log",to_path:"/output/main/log"}],count:2,types:{catalogue:2,file:0}},c.value.success?(t.value="获取打包迁移信息成功（模拟）",o.value="success"):(t.value=c.value.message||"获取打包迁移信息失败（模拟）",o.value="warning"))}function k(){w.value=!1}function z(){typeof pywebview<"u"&&pywebview.api?(pywebview.api.migrate_packages().then(s=>{t.value=s.message,o.value=s.success?"success":"warning",w.value=!1}).catch(s=>{t.value=`执行打包迁移失败: ${s}`,o.value="error"}),pywebview.api.log("info","执行打包迁移")):(t.value="打包迁移任务完成（模拟）",o.value="success",w.value=!1)}function O(){r.value=!0,l.value={srcDirName:"WebDemo",newDirName:""},typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","打开生成应用对话框")}function D(){r.value=!1}function H(){if(!l.value.newDirName){t.value="请输入新的应用名称",o.value="warning";return}typeof pywebview<"u"&&pywebview.api?(Promise.all([pywebview.api.copy_web_module(l.value.newDirName),pywebview.api.update_entry_files(l.value.newDirName)]).then(()=>{t.value=`应用 "${l.value.newDirName}" 生成成功！`,o.value="success",r.value=!1}).catch(s=>{t.value=`应用生成失败: ${s}`,o.value="error"}),pywebview.api.log("info",`生成应用: ${l.value.newDirName}`)):(t.value=`应用 "${l.value.newDirName}" 生成成功！(模拟)`,o.value="success",r.value=!1)}function J(){t.value=`当前主题: ${b.value}`,typeof pywebview<"u"&&pywebview.api?(pywebview.api.get_theme().then(s=>{t.value=`当前主题: ${s} (从Python获取)`,console.log("从Python获取主题:",s)}).catch(s=>{console.error("获取主题失败:",s),t.value=`获取主题失败: ${s}`}),pywebview.api.log("info",`主题测试: ${b.value}`)):t.value=`当前主题: ${b.value} (本地变量)`}function K(){typeof pywebview<"u"&&pywebview.api&&pywebview.api.log("info","点击"),console.log("info","点击"),console.log("表单数据",P.value)}const Q=()=>{C.push("/debug-about")};return(s,a)=>(p(),u("div",te,[e("div",se,[a[15]||(a[15]=e("div",{class:"mac-titlebar"},[e("div",{class:"mac-title"},"调试面板"),e("div",{class:"mac-actions"})],-1)),e("div",ie,[a[14]||(a[14]=Z('<div class="mac-alert success" data-v-4c659809><div class="mac-alert-icon" data-v-4c659809><i class="el-icon-success" data-v-4c659809></i></div><div class="mac-alert-content" data-v-4c659809><div class="mac-alert-title" data-v-4c659809>独立调试入口-测试跨窗口通信调试</div><div class="mac-alert-description" data-v-4c659809> 这是通过debug.html访问的新入口页面 </div></div></div><div class="mac-divider" data-v-4c659809><span data-v-4c659809>功能测试按钮面板</span></div>',2)),e("div",oe,[(p(),u(g,null,_(4,i=>e("div",{class:"button-row",key:i},[(p(),u(g,null,_(4,n=>e("div",{class:"button-cell",key:n},[e("button",{class:f(["mac-button-test",T(i,n)]),onClick:m=>V(i,n)},v(h(i,n)),11,ne)])),64))])),64))]),t.value?(p(),u("div",le,[e("div",{class:f(["mac-alert",o.value])},[e("div",ce,[e("i",{class:f(`el-icon-${o.value}`)},null,2)]),e("div",ue,[e("div",pe,"测试结果: "+v(t.value),1)])],2)])):y("",!0),r.value?(p(),u("div",ve,[e("div",de,[e("div",{class:"app-gen-dialog-header"},[a[2]||(a[2]=e("h3",null,"生成新应用",-1)),e("button",{class:"close-button",onClick:D},"×")]),e("div",re,[e("div",we,[a[3]||(a[3]=e("label",null,"源目录名称",-1)),x(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=i=>l.value.srcDirName=i),disabled:"",placeholder:"WebDemo"},null,512),[[$,l.value.srcDirName]]),a[4]||(a[4]=e("small",null,"默认为'WebDemo'，不可修改",-1))]),e("div",fe,[a[5]||(a[5]=e("label",null,[ee("新的应用名称 "),e("span",{class:"required"},"*")],-1)),x(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=i=>l.value.newDirName=i),placeholder:"请输入新应用名称"},null,512),[[$,l.value.newDirName]]),a[6]||(a[6]=e("small",null,"请输入新应用的名称",-1))])]),e("div",be,[e("button",{class:"mac-button-secondary",onClick:D},"取消"),e("button",{class:"mac-button-primary",onClick:H,disabled:!l.value.newDirName},"提交生成应用",8,me)])])])):y("",!0),w.value?(p(),u("div",ye,[e("div",ge,[e("div",{class:"app-gen-dialog-header"},[a[7]||(a[7]=e("h3",null,"打包迁移",-1)),e("button",{class:"close-button",onClick:k},"×")]),e("div",_e,[c.value.success?(p(),u("div",he,[e("div",ke,[a[9]||(a[9]=e("div",{class:"mac-alert-icon"},[e("i",{class:"el-icon-info"})],-1)),e("div",De,[a[8]||(a[8]=e("div",{class:"mac-alert-title"},"迁移配置信息",-1)),e("div",Ne," 共 "+v(c.value.count)+" 个项目，其中目录 "+v(c.value.types.catalogue)+" 个，文件 "+v(c.value.types.file)+" 个 ",1)])]),e("div",xe,[(p(!0),u(g,null,_(c.value.data,(i,n)=>(p(),u("div",{key:n,class:"migration-item"},[e("div",$e,[e("span",Ce,v(i.name),1),e("span",{class:f(["migration-item-type",i.type])},v(i.type==="catalogue"?"目录":"文件"),3)]),e("div",Pe,[e("div",Te,[a[10]||(a[10]=e("span",{class:"path-label"},"源路径:",-1)),e("span",Ve,v(i.from_path),1)]),e("div",Ae,[a[11]||(a[11]=e("span",{class:"path-label"},"目标路径:",-1)),e("span",Ge,v(i.to_path),1)])])]))),128))])])):(p(),u("div",Re,[a[13]||(a[13]=e("div",{class:"mac-alert-icon"},[e("i",{class:"el-icon-error"})],-1)),e("div",Se,[a[12]||(a[12]=e("div",{class:"mac-alert-title"},"获取迁移信息失败",-1)),e("div",Be,v(c.value.message),1)])]))]),e("div",Fe,[e("button",{class:"mac-button-secondary",onClick:k},"取消"),e("button",{class:"mac-button-primary",onClick:z,disabled:!c.value.success},"确认执行迁移",8,Ie)])])])):y("",!0),e("div",{class:"buttons"},[e("button",{class:"mac-button-primary",onClick:Q}," 关于页面 "),e("button",{class:"mac-button-primary",onClick:K},"测试日志")])])])]))}}),qe=ae(Me,[["__scopeId","data-v-4c659809"]]);export{qe as default};
