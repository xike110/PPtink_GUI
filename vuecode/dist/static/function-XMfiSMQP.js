import{_ as Oe,r as u,c as Y,R as je,o as Je,a4 as qe,a3 as Ke,w as We,b as n,e,g as v,d as Ce,f as ze,p as m,t as r,T as He,a5 as se,i as g,v as $,a6 as $e,F as A,l as j,j as oe,y as P,A as z,a7 as Ae,u as Ge,k as Qe,s as xe,x as a}from"./zh-cn-Vbf23Fjh.js";import{a as Ye}from"./main-DhXTod4p.js";const Xe={class:"macos-window"},Ze={class:"content-area"},el={class:"section-container"},ll={class:"categories-section"},tl={class:"modal-content"},sl={class:"modal-body"},ol={class:"steps-nav"},nl={key:0,class:"step-content"},al={class:"app-types"},il={key:1,class:"step-content"},ul={class:"step-title"},rl={key:0,class:"form-content"},cl={class:"form-group file-select-group"},vl={class:"file-select-container"},dl={key:0,class:"file-info-preview"},pl={class:"form-group"},fl={class:"form-group"},ml={class:"form-group"},gl={class:"category-select-container"},yl=["value"],wl={key:1,class:"new-category-input"},bl={class:"app-icon-preview"},_l=["src"],kl={key:1,class:"form-content"},hl={class:"form-group"},Cl={class:"link-input-container"},$l=["disabled"],Al={key:0,class:"website-info-preview"},xl={class:"form-group"},Sl={class:"form-group"},Dl={class:"form-group"},Nl={class:"category-select-container"},Vl=["value"],Tl={key:1,class:"new-category-input"},Ll={class:"app-icon-preview"},Ul=["src"],Pl={key:1,class:"link-validation-reminder"},El={key:2,class:"step-content"},Ml={class:"app-confirm"},Fl={class:"app-confirm-preview"},Rl=["src","alt"],Bl={class:"app-info"},Il=["title"],Ol={class:"app-category"},jl=["title"],Jl={class:"app-confirm-details"},ql={class:"confirm-detail-options"},Kl={class:"debug-info"},Wl={class:"step-buttons"},zl=["disabled"],Hl={class:"section-header"},Gl={class:"search-bar-container"},Ql={class:"search-bar"},Yl={class:"search-results"},Xl=["src","alt"],Zl={class:"result-app-info"},et={class:"result-app-name"},lt={class:"result-app-description"},tt=["onClick"],st={class:"create-app-dropdown"},ot={key:0,class:"dropdown-menu"},nt={class:"category-tabs"},at=["onClick"],it=["onClick"],ut=["src","alt"],rt={class:"app-info"},ct=["title"],vt={class:"app-category"},dt=["title"],pt=["onClick"],ft=["onClick"],mt=["src","alt"],gt={class:"app-info"},yt=["title"],wt={class:"app-category"},bt=["title"],_t=["onClick"],kt={class:"modal-content delete-app-modal"},ht={class:"modal-body"},Ct={class:"steps-nav"},$t={key:0,class:"step-content"},At={class:"search-container"},xt=["disabled"],St={key:0,class:"search-error"},Dt={key:1,class:"step-content"},Nt={class:"delete-app-intro"},Vt={key:0,class:"app-delete-list"},Tt=["onClick"],Lt=["src","alt"],Ut={class:"app-info"},Pt=["title"],Et={class:"app-category"},Mt=["title"],Ft={key:1,class:"no-apps-message"},Rt={key:2,class:"delete-app-warning"},Bt={class:"modal-footer"},It={key:0},Ot=["disabled"],jt={key:1,class:"step2-buttons"},Jt=["disabled"],qt={__name:"function",setup(Kt){const w=je("appConfig"),x=u("all"),ne=u(!1),me=u(""),ge=u("info"),p=u([]),E=u(""),M=u(!1);let X=null;const ye=Y(()=>{const s=E.value.trim().toLowerCase();return s?p.value&&p.value.length>0?p.value.filter(l=>l.isview!==!1&&(l.name.toLowerCase().includes(s)||l.description.toLowerCase().includes(s))):[]:[]}),Se=()=>{E.value.trim()?(M.value=!0,ae(),console.log("搜索内容更新:",E.value)):M.value=!1},De=()=>{X=setTimeout(()=>{M.value=!1},200)},ae=()=>{X&&(clearTimeout(X),X=null)},we=()=>{E.value.trim()?(console.log("搜索内容:",E.value),M.value=!0,ae()):(console.log("搜索内容为空"),M.value=!1)},Z=u(15),ee=u(20),ie=Y(()=>w&&w.value&&w.value.NEWLINE?w.value.NEWLINE:2),S=(s,l)=>s?s.length>l?s.substring(0,l)+"...":s:"",C=u(!1),ue=u(!1),c=u(1),d=u(""),le=u(!1),F=u(!1),D=u(""),N=u(!1),J=u(!1),V=u(!1),y=u(""),re=u(!1),ce=u([]),k=u(null),H=u(!1),b=u(1),T=u(""),R=u([]),B=u(""),be=Y(()=>{if(c.value===1)return d.value!=="";if(c.value===2){if(d.value==="external")return o.value.open&&o.value.name&&o.value.category;if(d.value==="link")return o.value.open&&o.value.name&&o.value.category&&J.value}else if(c.value===3)return!0;return!1}),o=u({name:"",category:"",description:"",icon:"./ico/demo1.png",bgcolor:"#e6f7ff",type:"",open:"",recommend:!1,isview:!0,belongs:!1});Je(()=>{window.addEventListener("refresh_apps",G)}),qe(()=>{window.removeEventListener("refresh_apps",G),window.removeEventListener("click",ke)});function G(){console.log("接收到刷新应用列表事件"),window.pywebview&&pywebview.api.get_config().then(s=>{s&&s.APPS&&(p.value=s.APPS,console.log("应用列表已刷新",p.value),w&&w.value&&(w.value.APPS=s.APPS))}).catch(s=>{console.error("刷新应用列表失败:",s)})}function _e(s){d.value=s,o.value={name:"",category:"",description:"",icon:"./ico/demo1.png",bgcolor:"#e6f7ff",type:s,open:"",recommend:!1,isview:!0,belongs:!1}}function Ne(){if(!o.value.open||o.value.open.trim()===""){D.value="请输入URL地址",N.value=!1;return}F.value=!0,D.value="正在验证链接并获取网站信息...",N.value=!1,J.value=!1,console.log("验证链接:",o.value.open),window.pywebview&&(pywebview.api.log("info",`验证链接: ${o.value.open}`),pywebview.api.get_website_info(o.value.open).then(s=>{F.value=!1,s.success?(console.log("获取网站信息成功:",s),o.value.name=s.title,o.value.description=s.description,o.value.icon=s.icon_path,D.value="链接有效，已获取网站信息",N.value=!0,J.value=!0,i(`已成功获取网站 ${s.title} 的信息`,"info")):(console.log("获取网站信息失败:",s.message),D.value=`验证失败: ${s.message}`,N.value=!1,i(`验证链接失败: ${s.message}`,"error"))}).catch(s=>{F.value=!1,D.value=`验证出错: ${s}`,N.value=!1,console.error("验证链接出错:",s),i(`验证出错: ${s}`,"error")}))}function Ve(){be.value&&c.value<3&&(c.value===2&&(d.value==="external"||d.value==="link")&&(o.value.type=d.value,console.log(`准备进入确认步骤: 类型=${d.value}, 名称=${o.value.name}`)),c.value++,console.log(`当前步骤: ${c.value}, 应用类型: ${o.value.type}`),c.value===3&&(!o.value.type&&d.value&&(o.value.type=d.value,console.log(`在第三步重新设置type=${o.value.type}`)),console.log("第三步确认数据:",JSON.stringify(o.value))))}function Te(){c.value>1&&c.value--}function Le(){le.value||(le.value=!0,console.log("打开文件选择对话框"),window.pywebview&&(pywebview.api.log("info","用户点击文件选择按钮"),pywebview.api.select_file().then(s=>{if(le.value=!1,s.success){console.log("文件选择成功:",s);const l=s.file_info;l&&l.success?(o.value.open=s.file_path,o.value.name=l.name,o.value.description=l.description,o.value.icon=l.icon_path,i(`已选择文件: ${l.name}`,"info")):i(`获取文件信息失败: ${(l==null?void 0:l.message)||"未知错误"}`,"error")}else console.log("文件选择取消或失败:",s.message),s.message!=="未选择文件"&&i(`选择文件失败: ${s.message}`,"warning")}).catch(s=>{le.value=!1,console.error("文件选择出错:",s),i(`文件选择错误: ${s}`,"error")})))}const L=Y(()=>{const s=new Set;return p.value.forEach(l=>{l&&l.category&&l.isview&&s.add(l.category)}),Array.from(s)}),Ue=Y(()=>x.value==="all"?p.value:p.value.filter(s=>s.category===x.value));Ke(()=>{w&&w.value&&w.value.APPS&&Array.isArray(w.value.APPS)&&(p.value=w.value.APPS,console.log("home.vue 已更新 APPS 数据",p.value),xe(()=>{L.value.length>0&&(x.value="all")}))});function Pe(){C.value=!C.value}function ke(s){C.value&&!s.target.closest(".create-app-dropdown")&&(C.value=!1)}window.addEventListener("click",ke);function Ee(){if(console.log("点击了删除软件选项"),window.pywebview){if(pywebview.api.log("info","用户点击了删除软件选项"),ce.value=p.value.filter(s=>s.belongs===!1),ce.value.length===0){i("没有可删除的用户添加应用","warning"),C.value=!1;return}b.value=1,T.value="",R.value=[],k.value=null,B.value="",re.value=!0}C.value=!1}function ve(){if(T.value.trim()===""){B.value="请输入搜索关键字";return}B.value="";const s=T.value.toLowerCase().trim();if(R.value=ce.value.filter(l=>l.name.toLowerCase().includes(s)||l.description.toLowerCase().includes(s)||l.category.toLowerCase().includes(s)),R.value.length===0){B.value="没有找到匹配的应用";return}b.value=2}function Q(){re.value=!1,b.value=1,k.value=null,T.value="",R.value=[],B.value=""}function Me(){if(!k.value){i("请先选择要删除的应用","warning");return}H.value=!0,console.log("正在删除应用:",k.value.name),window.pywebview&&pywebview.api.delete_app(k.value.name).then(s=>{H.value=!1,s.success?(i(`已成功删除应用: ${k.value.name}`,"info"),Q(),G()):i(`删除应用失败: ${s.message}`,"error")}).catch(s=>{H.value=!1,console.error("删除应用出错:",s),i(`删除应用出错: ${s}`,"error")})}function Fe(){if(console.log("点击了导入备份选项"),window.pywebview){pywebview.api.log("info","用户点击了导入备份选项"),i("准备导入应用备份","info");const s=document.createElement("input");s.type="file",s.accept=".json",s.style.display="none",document.body.appendChild(s),s.addEventListener("change",function(l){const t=l.target.files[0];if(!t){i("未选择文件","warning"),document.body.removeChild(s);return}const f=new FileReader;f.onload=function(pe){try{let W=function(h){if(h>=K.length){i(`成功导入 ${I} 个应用`,"info"),G(),document.body.removeChild(s);return}const U=K[h];U.belongs=!1,fe.some(O=>O.name===U.name||O.open===U.open)?(console.log(`应用 ${U.name} 已存在，跳过导入`),W(h+1)):pywebview.api.save_app(U).then(O=>{O.success?(I++,console.log(`成功导入应用: ${U.name}`)):console.error(`导入应用 ${U.name} 失败:`,O.message),W(h+1)}).catch(O=>{console.error(`导入应用 ${U.name} 失败:`,O),W(h+1)})};const _=pe.target.result,K=JSON.parse(_);if(!Array.isArray(K)||K.length===0){i("导入的文件格式无效或为空","error"),document.body.removeChild(s);return}const fe=w.value.APPS||[];let I=0;W(0)}catch(_){console.error("解析文件失败:",_),i(`解析文件失败: ${_.message}`,"error"),document.body.removeChild(s)}},f.onerror=function(){console.error("读取文件出错"),i("读取文件出错","error"),document.body.removeChild(s)},f.readAsText(t)}),s.click()}C.value=!1}function Re(){if(console.log("点击了导出备份选项"),window.pywebview){pywebview.api.log("info","用户点击了导出备份选项");const s=p.value.filter(_=>_.belongs===!1);if(s.length===0){i("没有可导出的用户添加应用","warning"),C.value=!1;return}const l=new Date,f=`app_backup_${l.getFullYear()+("0"+(l.getMonth()+1)).slice(-2)+("0"+l.getDate()).slice(-2)+("0"+l.getHours()).slice(-2)+("0"+l.getMinutes()).slice(-2)+("0"+l.getSeconds()).slice(-2)}.json`,pe=JSON.stringify(s,null,2);pywebview.api.open_directory_dialog().then(_=>{if(_==="未选择目录"){i("已取消导出","warning");return}const K=_+(_.endsWith("\\")?"":"\\")+f,fe=new Blob([pe],{type:"application/json"}),I=new FileReader;I.onload=function(){const W=I.result.split(",")[1];pywebview.api.save_exported_apps(K,W).then(h=>{h.success?i(`已成功导出 ${s.length} 个应用到 ${h.path}`,"info"):i(`导出失败: ${h.message}`,"error")}).catch(h=>{console.error("保存文件出错:",h),i(`保存文件出错: ${h}`,"error")})},I.onerror=function(){i("读取数据出错","error")},I.readAsDataURL(fe)}).catch(_=>{console.error("打开目录对话框出错:",_),i(`打开目录对话框出错: ${_}`,"error")})}C.value=!1}function Be(){console.log("点击了添加应用按钮"),window.pywebview&&(pywebview.api.log("info","用户点击了添加应用按钮"),d.value="",c.value=1,V.value=!1,y.value="",o.value={name:"",category:"",description:"",icon:"./ico/demo1.png",bgcolor:"#e6f7ff",type:"",open:"",recommend:!1,isview:!0,belongs:!1},F.value=!1,D.value="",N.value=!1,J.value=!1,ue.value=!0)}function de(){ue.value=!1}function Ie(){if(console.log("提交应用表单开始执行:",JSON.stringify(o.value)),console.log("当前步骤:",c.value),console.log("应用类型:",d.value),!o.value.type&&d.value&&(o.value.type=d.value,console.log(`在提交前设置type=${o.value.type}`)),window.pywebview){const s=p.value.some(t=>t.name===o.value.name),l=p.value.some(t=>t.open===o.value.open);if(s){i(`应用名称 "${o.value.name}" 已存在，请使用其他名称`,"error");return}if(l){i(`应用路径或链接 "${o.value.open}" 已存在`,"error");return}pywebview.api.log("info",`提交应用表单: ${o.value.name}, 类型: ${o.value.type}`),pywebview.api.save_app(o.value).then(t=>{console.log("保存应用结果:",t),t.success?(i(`应用 ${o.value.name} 添加成功`,"info"),de(),G()):i(`添加失败: ${t.message}`,"error")}).catch(t=>{console.error("保存应用出错:",t),i(`保存出错: ${t}`,"error")})}else console.error("pywebview 不可用，无法提交表单")}We(()=>o.value.category,s=>{if(s==="__new__"){if(L.value.length>=12){i("分类不能超过12个","warning"),o.value.category="";return}V.value=!0,o.value.category=""}});function te(){if(y.value.trim()===""){i("分类名称不能为空","warning");return}if(L.value.length>=12){i("分类不能超过12个","warning"),V.value=!1,y.value="",o.value.category="";return}if(L.value.includes(y.value.trim())){i(`分类 "${y.value}" 已存在`,"warning"),o.value.category=y.value.trim(),V.value=!1,y.value="";return}const s=y.value.trim();o.value.category=s,V.value=!1;const l={name:`temp_${Date.now()}`,category:s,isview:!0,description:""};p.value.push(l),xe(()=>{console.log(`新分类已添加: ${s}`),console.log(`当前所有分类: ${JSON.stringify(Array.from(L.value))}`)}),y.value="",i(`已创建新分类: ${s}`,"info")}function he(){V.value=!1,y.value="",o.value.category=""}const i=(s,l="info",t=3e3)=>{me.value=s,ge.value=l,ne.value=!0,setTimeout(()=>{ne.value=!1},t)},q=s=>{console.log("启动应用程序:",s.name),pywebview.api.log("info",`启动应用程序: ${s.name}`),pywebview.api.run_app(s).then(l=>{let t="info",f=`正在启动: ${s.name}`;l||(t="error",f=`启动失败: ${s.name}`),i(f,t)}).catch(l=>{console.error("启动应用出错:",l),i(`启动出错: ${s.name}`,"error")})};return(s,l)=>(a(),n(A,null,[e("div",Xe,[e("div",Ze,[e("div",el,[e("div",ll,[Ce(He,{name:"fade"},{default:ze(()=>[ne.value?(a(),n("div",{key:0,class:m(["message-popup",ge.value])},r(me.value),3)):v("",!0)]),_:1}),ue.value?(a(),n("div",{key:0,class:"modal-overlay",onClick:se(de,["self"])},[e("div",tl,[e("div",{class:"modal-header"},[l[20]||(l[20]=e("h2",null,"添加新应用",-1)),e("button",{class:"close-button",onClick:de},"×")]),e("div",sl,[e("div",ol,[e("div",{class:m(["step",{active:c.value===1,completed:c.value>1}])},l[21]||(l[21]=[e("div",{class:"step-number"},"1",-1),e("div",{class:"step-text"},"选择类型",-1)]),2),e("div",{class:m(["step-line",{active:c.value>1}])},null,2),e("div",{class:m(["step",{active:c.value===2,completed:c.value>2}])},l[22]||(l[22]=[e("div",{class:"step-number"},"2",-1),e("div",{class:"step-text"},"应用信息",-1)]),2),e("div",{class:m(["step-line",{active:c.value>2}])},null,2),e("div",{class:m(["step",{active:c.value===3,completed:c.value>3}])},l[23]||(l[23]=[e("div",{class:"step-number"},"3",-1),e("div",{class:"step-text"},"确认添加",-1)]),2)]),c.value===1?(a(),n("div",nl,[l[26]||(l[26]=e("h3",{class:"step-title"},"选择应用类型",-1)),e("div",al,[e("div",{class:m(["app-type-card",{selected:d.value==="external"}]),onClick:l[0]||(l[0]=t=>_e("external"))},l[24]||(l[24]=[e("div",{class:"app-type-icon"},[e("i",{class:"icon-app"},"📁")],-1),e("div",{class:"app-type-name"},"外部软件",-1),e("div",{class:"app-type-desc"}," 选择本地计算机上的可执行文件 ",-1)]),2),e("div",{class:m(["app-type-card",{selected:d.value==="link"}]),onClick:l[1]||(l[1]=t=>_e("link"))},l[25]||(l[25]=[e("div",{class:"app-type-icon"},[e("i",{class:"icon-link"},"🔗")],-1),e("div",{class:"app-type-name"},"外部链接",-1),e("div",{class:"app-type-desc"}," 添加网站链接，通过浏览器打开 ",-1)]),2)])])):v("",!0),c.value===2?(a(),n("div",il,[e("h3",ul,r(d.value==="external"?"外部软件信息":"链接信息"),1),d.value==="external"?(a(),n("div",rl,[e("div",cl,[l[27]||(l[27]=e("label",null,"选择软件文件",-1)),e("div",vl,[g(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=t=>o.value.open=t),readonly:"",placeholder:"请选择软件可执行文件"},null,512),[[$,o.value.open]]),e("button",{onClick:Le,class:"file-select-button"}," 浏览... ")])]),o.value.open?(a(),n("div",dl,[e("div",pl,[l[28]||(l[28]=e("label",{for:"appName"},"应用名称",-1)),g(e("input",{type:"text",id:"appName","onUpdate:modelValue":l[3]||(l[3]=t=>o.value.name=t)},null,512),[[$,o.value.name]])]),e("div",fl,[l[29]||(l[29]=e("label",{for:"appDescription"},"应用描述",-1)),g(e("input",{type:"text",id:"appDescription","onUpdate:modelValue":l[4]||(l[4]=t=>o.value.description=t)},null,512),[[$,o.value.description]])]),e("div",ml,[l[32]||(l[32]=e("label",{for:"appCategory"},"应用分类",-1)),e("div",gl,[V.value?(a(),n("div",wl,[g(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=t=>y.value=t),placeholder:"请输入新分类名称(最多8个字符)",maxlength:"8",onKeydown:oe(te,["enter"])},null,544),[[$,y.value]]),e("div",{class:"new-category-actions"},[e("button",{type:"button",class:"confirm-new-cat",onClick:te}," 确认 "),e("button",{type:"button",class:"cancel-new-cat",onClick:he}," 取消 ")])])):g((a(),n("select",{key:0,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.category=t),class:"category-select"},[l[30]||(l[30]=e("option",{value:"",disabled:""},"-- 请选择分类 --",-1)),(a(!0),n(A,null,j(L.value,t=>(a(),n("option",{key:t,value:t},r(t),9,yl))),128)),l[31]||(l[31]=e("option",{value:"__new__"},"+ 创建新分类",-1))],512)),[[$e,o.value.category]])])]),e("div",bl,[l[33]||(l[33]=e("label",null,"应用图标",-1)),e("div",{class:"icon-preview",style:P({backgroundColor:o.value.bgcolor})},[e("img",{src:o.value.icon,alt:"应用图标"},null,8,_l)],4)])])):v("",!0)])):v("",!0),d.value==="link"?(a(),n("div",kl,[e("div",hl,[l[34]||(l[34]=e("label",{for:"linkUrl"},"链接地址",-1)),e("div",Cl,[g(e("input",{type:"url",id:"linkUrl","onUpdate:modelValue":l[7]||(l[7]=t=>o.value.open=t),placeholder:"请输入完整URL（如 https://www.example.com）",required:""},null,512),[[$,o.value.open]]),e("button",{onClick:Ne,class:"link-validate-button",disabled:F.value},r(F.value?"验证中...":"验证链接"),9,$l)]),D.value?(a(),n("small",{key:0,class:m({"validation-error":!N.value,"validation-success":N.value})},r(D.value),3)):v("",!0)]),J.value?(a(),n("div",Al,[e("div",xl,[l[35]||(l[35]=e("label",{for:"linkName"},"链接名称",-1)),g(e("input",{type:"text",id:"linkName","onUpdate:modelValue":l[8]||(l[8]=t=>o.value.name=t),required:""},null,512),[[$,o.value.name]])]),e("div",Sl,[l[36]||(l[36]=e("label",{for:"linkDescription"},"链接描述",-1)),g(e("input",{type:"text",id:"linkDescription","onUpdate:modelValue":l[9]||(l[9]=t=>o.value.description=t),required:""},null,512),[[$,o.value.description]])]),e("div",Dl,[l[39]||(l[39]=e("label",{for:"linkCategory"},"链接分类",-1)),e("div",Nl,[V.value?(a(),n("div",Tl,[g(e("input",{type:"text","onUpdate:modelValue":l[11]||(l[11]=t=>y.value=t),placeholder:"请输入新分类名称(最多8个字符)",maxlength:"8",onKeydown:oe(te,["enter"])},null,544),[[$,y.value]]),e("div",{class:"new-category-actions"},[e("button",{type:"button",class:"confirm-new-cat",onClick:te}," 确认 "),e("button",{type:"button",class:"cancel-new-cat",onClick:he}," 取消 ")])])):g((a(),n("select",{key:0,"onUpdate:modelValue":l[10]||(l[10]=t=>o.value.category=t),class:"category-select"},[l[37]||(l[37]=e("option",{value:"",disabled:""},"-- 请选择分类 --",-1)),(a(!0),n(A,null,j(L.value,t=>(a(),n("option",{key:t,value:t},r(t),9,Vl))),128)),l[38]||(l[38]=e("option",{value:"__new__"},"+ 创建新分类",-1))],512)),[[$e,o.value.category]])])]),e("div",Ll,[l[40]||(l[40]=e("label",null,"网站图标",-1)),e("div",{class:"icon-preview",style:P({backgroundColor:o.value.bgcolor})},[e("img",{src:o.value.icon,alt:"网站图标"},null,8,Ul)],4)])])):o.value.open&&!F.value&&!J.value?(a(),n("div",Pl,l[41]||(l[41]=[e("p",null,'请点击"验证链接"按钮获取网站信息',-1)]))):v("",!0)])):v("",!0)])):v("",!0),c.value===3?(a(),n("div",El,[l[46]||(l[46]=e("h3",{class:"step-title"},"确认添加",-1)),e("div",Ml,[e("div",Fl,[e("div",{class:"app-item preview-item",onClick:l[12]||(l[12]=t=>q(o.value))},[e("div",{class:"app-icon",style:P({backgroundColor:o.value.bgcolor})},[e("img",{src:o.value.icon,alt:o.value.name},null,8,Rl)],4),e("div",Bl,[e("div",{class:"app-name",title:o.value.name},r(S(o.value.name,Z.value)),9,Il),e("div",Ol,r(o.value.category),1),e("div",{class:"app-description",title:o.value.description},r(S(o.value.description,ee.value)),9,jl)])])]),e("div",Jl,[e("div",ql,[e("label",null,[g(e("input",{type:"checkbox","onUpdate:modelValue":l[13]||(l[13]=t=>o.value.recommend=t)},null,512),[[Ae,o.value.recommend]]),l[42]||(l[42]=z(" 设为推荐应用 "))]),e("label",null,[g(e("input",{type:"checkbox","onUpdate:modelValue":l[14]||(l[14]=t=>o.value.isview=t)},null,512),[[Ae,o.value.isview]]),l[43]||(l[43]=z(" 显示在应用列表中 "))])]),e("div",Kl,[l[44]||(l[44]=e("h4",null,"完整数据信息",-1)),e("pre",null,r(JSON.stringify(o.value,null,2)),1)]),e("div",{class:"direct-submit-container"},[e("button",{onClick:Ie,class:"direct-submit-button"},l[45]||(l[45]=[e("i",{class:"confirm-icon"},"✓",-1),z(" 确认添加应用 ")]))])])])])):v("",!0),e("div",Wl,[c.value>1?(a(),n("button",{key:0,class:"step-button prev-button",onClick:Te}," 上一步 ")):v("",!0),c.value<3?(a(),n("button",{key:1,class:"step-button next-button",onClick:Ve,disabled:!be.value}," 下一步 ",8,zl)):v("",!0)])])])])):v("",!0),e("div",Hl,[e("div",Gl,[e("div",Ql,[Ce(Ge(Ye),{class:"search-icon"}),g(e("input",{"onUpdate:modelValue":l[15]||(l[15]=t=>E.value=t),type:"text",placeholder:"搜索",onKeyup:oe(we,["enter"]),onInput:Se,onFocus:l[16]||(l[16]=t=>M.value=!0),onBlur:De},null,544),[[$,E.value]]),e("button",{class:"search-button",onClick:we},"搜")]),g(e("div",Yl,[(a(!0),n(A,null,j(ye.value,t=>(a(),n("div",{key:t.name,class:"search-result-item",onMousedown:ae},[e("div",{class:"result-app-icon",style:P({backgroundColor:t.bgcolor})},[e("img",{src:t.icon,alt:t.name},null,8,Xl)],4),e("div",Zl,[e("div",et,r(t.name),1),e("div",lt,r(t.description),1)]),e("button",{class:"result-open-button",onClick:f=>q(t)}," 启动 ",8,tt)],32))),128))],512),[[Qe,M.value&&ye.value.length>0]])]),e("div",st,[e("button",{class:"create-app-button",onClick:Be},l[47]||(l[47]=[e("span",{class:"plus-icon"},"+",-1),z(" 添加软件 ")])),e("button",{class:"dropdown-toggle",onClick:Pe},l[48]||(l[48]=[e("span",{class:"arrow-down"},"▼",-1)])),C.value?(a(),n("div",ot,[e("div",{class:"dropdown-item",onClick:Ee},"删除软件"),e("div",{class:"dropdown-item",onClick:Fe},"导入备份"),e("div",{class:"dropdown-item",onClick:Re},"导出备份")])):v("",!0)])]),e("div",nt,[e("div",{class:m(["category-tab",{active:x.value==="all"}]),onClick:l[17]||(l[17]=t=>x.value="all")}," 全部 ",2),(a(!0),n(A,null,j(L.value,t=>(a(),n("div",{key:t,class:m(["category-tab",{active:x.value===t}]),onClick:f=>x.value=t},r(t),11,at))),128))]),e("div",{class:"app-list",style:P({"grid-template-columns":`repeat(${ie.value}, 1fr)`})},[x.value==="all"?(a(!0),n(A,{key:0},j(p.value,t=>(a(),n(A,{key:t.name},[t&&t.isview===!0?(a(),n("div",{key:0,class:"app-item",onClick:f=>q(t)},[e("div",{class:"app-icon",style:P({backgroundColor:t.bgcolor})},[e("img",{src:t.icon,alt:t.name},null,8,ut)],4),e("div",rt,[e("div",{class:"app-name",title:t.name},r(S(t.name,Z.value)),9,ct),e("div",vt,r(t.category),1),e("div",{class:"app-description",title:t.description},r(S(t.description,ee.value)),9,dt)]),ie.value<4?(a(),n("button",{key:0,class:"open-button",onClick:se(f=>q(t),["stop"])}," 启动 ",8,pt)):v("",!0)],8,it)):v("",!0)],64))),128)):(a(!0),n(A,{key:1},j(Ue.value,t=>(a(),n("div",{class:"app-item",key:t.name,onClick:f=>q(t)},[e("div",{class:"app-icon",style:P({backgroundColor:t.bgcolor})},[e("img",{src:t.icon,alt:t.name},null,8,mt)],4),e("div",gt,[e("div",{class:"app-name",title:t.name},r(S(t.name,Z.value)),9,yt),e("div",wt,r(t.category),1),e("div",{class:"app-description",title:t.description},r(S(t.description,ee.value)),9,bt)]),ie.value<4?(a(),n("button",{key:0,class:"open-button",onClick:se(f=>q(t),["stop"])}," 启动 ",8,_t)):v("",!0)],8,ft))),128))],4)])])])]),re.value?(a(),n("div",{key:0,class:"modal-overlay",onClick:se(Q,["self"])},[e("div",kt,[e("div",{class:"modal-header"},[l[49]||(l[49]=e("h2",null,"删除应用",-1)),e("button",{class:"close-button",onClick:Q},"×")]),e("div",ht,[e("div",Ct,[e("div",{class:m(["step",{active:b.value===1,completed:b.value>1}])},l[50]||(l[50]=[e("div",{class:"step-number"},"1",-1),e("div",{class:"step-text"},"搜索应用",-1)]),2),e("div",{class:m(["step-line",{active:b.value>1}])},null,2),e("div",{class:m(["step",{active:b.value===2,completed:b.value>2}])},l[51]||(l[51]=[e("div",{class:"step-number"},"2",-1),e("div",{class:"step-text"},"选择删除",-1)]),2)]),b.value===1?(a(),n("div",$t,[l[52]||(l[52]=e("p",{class:"delete-app-intro"},"请输入应用名称进行搜索：",-1)),e("div",At,[g(e("input",{type:"text","onUpdate:modelValue":l[18]||(l[18]=t=>T.value=t),placeholder:"请输入应用名称关键字",class:"search-input",onKeydown:oe(ve,["enter"])},null,544),[[$,T.value]]),e("button",{class:"search-button",onClick:ve,disabled:T.value.trim()===""}," 搜索 ",8,xt)]),B.value?(a(),n("div",St,r(B.value),1)):v("",!0)])):v("",!0),b.value===2?(a(),n("div",Dt,[e("p",Nt," 搜索结果 ("+r(R.value.length)+" 个)： ",1),R.value.length>0?(a(),n("div",Vt,[(a(!0),n(A,null,j(R.value,t=>(a(),n("div",{key:t.name,class:m(["app-delete-item",{selected:k.value&&k.value.name===t.name}]),onClick:f=>k.value=t},[e("div",{class:"app-icon",style:P({backgroundColor:t.bgcolor})},[e("img",{src:t.icon,alt:t.name},null,8,Lt)],4),e("div",Ut,[e("div",{class:"app-name",title:t.name},r(S(t.name,Z.value)),9,Pt),e("div",Et,r(t.category),1),e("div",{class:"app-description",title:t.description},r(S(t.description,ee.value)),9,Mt)])],10,Tt))),128))])):(a(),n("div",Ft,"找不到匹配的应用")),k.value?(a(),n("div",Rt,[e("p",null,[l[53]||(l[53]=z(" ⚠️ 警告：删除操作不可恢复，请确认是否删除 ")),e("strong",null,r(k.value.name),1),l[54]||(l[54]=z("？ "))])])):v("",!0)])):v("",!0)]),e("div",Bt,[b.value===1?(a(),n("div",It,[e("button",{class:"cancel-button",onClick:Q}," 取消 "),e("button",{class:"search-submit-button",disabled:T.value.trim()==="",onClick:ve}," 开始搜索 ",8,Ot)])):v("",!0),b.value===2?(a(),n("div",jt,[e("button",{class:"back-button",onClick:l[19]||(l[19]=t=>b.value=1)}," 返回搜索 "),e("button",{class:"cancel-button",onClick:Q}," 取消 "),e("button",{class:"delete-button",disabled:!k.value||H.value,onClick:Me},r(H.value?"删除中...":"确认删除"),9,Jt)])):v("",!0)])])])):v("",!0)],64))}},Gt=Oe(qt,[["__scopeId","data-v-1af218ec"]]);export{Gt as default};
