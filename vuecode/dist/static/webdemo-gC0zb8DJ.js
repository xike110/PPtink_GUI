const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/DynamicForm-Cks_UIcR.js","static/zh-cn-C3gtzjIZ.js","static/zh-cn-BxP3I219.css","static/DynamicForm-BQl7rqGd.css","static/el-progress-COnHpMon.css","static/HelpPage-BkZq3BWB.js","static/HelpPage-24iUMBGs.css","static/AboutPage-Bygn3KBl.js","static/AboutPage-BMBa-29w.css","static/LogView-CT6eTb8E.js","static/LogView-CfEqien6.css"])))=>i.map(i=>d[i]);
import{r as u,M as x,R as q,b as S,x as y,e,g as j,d as n,S as B,f as p,u as r,U as F,V as W,W as J,t as A,X as K,Y as Q,Z as Y,_ as z,N as X,o as Z,n as ee,F as oe,l as te,p as ae,m as k,P as ne,$ as O,a0 as V,a1 as L,a2 as D,D as G,G as se,I,H as ie,J as le,Q as re,K as de,L as ce}from"./zh-cn-C3gtzjIZ.js";const ue=()=>{const o=new Date;return`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}:${o.getSeconds().toString().padStart(2,"0")}`},h=u([]),ze=u(!1),ve=u(0),pe=u(""),E=u(!1),M=u(!1),H=(o,s="info")=>{h.value.push({time:ue(),message:o,type:s})},we=()=>{h.value=[]},ge=o=>{h.value.length>o&&(h.value=h.value.slice(-o))},He=async o=>{try{typeof window<"u"&&window.pywebview&&window.pywebview.api?await window.pywebview.api.set_runstate(o):console.warn("pywebview API 未就绪，无法设置运行状态"),E.value=o}catch(s){console.error("设置运行状态失败:",s)}},qe=async()=>{try{if(typeof window<"u"&&window.pywebview&&window.pywebview.api){const o=await window.pywebview.api.get_runstate();return E.value=o,o}else return console.warn("pywebview API 未就绪，无法获取运行状态"),E.value}catch(o){return console.error("获取运行状态失败:",o),!1}},je=()=>{try{const o=h.value.map(v=>`[${v.time}] [${v.type.toUpperCase()}] ${v.message}`).join(`
`),s=new Blob([o],{type:"text/plain;charset=utf-8"}),d=document.createElement("a");d.href=URL.createObjectURL(s);const a=new Date,m=`log_${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}_${String(a.getHours()).padStart(2,"0")}-${String(a.getMinutes()).padStart(2,"0")}-${String(a.getSeconds()).padStart(2,"0")}.log`;return d.download=m,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(d.href),{success:!0}}catch(o){return{success:!1,error:o}}};h.value.length===0&&H("系统就绪，等待运行...");typeof window<"u"&&(window.logStore={addLog:H,clearLogs:we,trimLogs:ge,progressPercentage:ve,progressStatus:pe,submit_allowed:M});const i=u({GUI_NAME:"加载中...",SIGN:"加载中...",MAIN:"加载中...",RUNPARAMS:!1,GUI_VERSION:"加载中...",GUI_INTRODUCE:"加载中...",GUI_COLORS:"加载中...",PERSON:"加载中...",DOMAINNAME:"加载中...",BRANDNAME:"PPtink",GUI_FULLSCREEN:"加载中...",GUI_THEME:"light",ICO_LOGO:"./ico/logo.png",ASKED_QUESTIONS:[{question:"如何报告Bug或提出建议？",answer:'您可以通过"帮助"菜单中的"反馈"功能向我们报告问题或提出建议。也可以直接发送邮件至我们的支持邮箱，我们会尽快回复并处理您的反馈。'},{question:"软件更新频率是多久？",answer:'我们通常每月发布一次功能更新，每周发布一次小型修复更新。您可以在"设置"中选择自动更新选项，以确保总是使用最新版本。'},{question:"如何提高软件运行速度？",answer:'您可以尝试清理缓存（在"设置"→"性能优化"中），关闭不必要的后台进程，定期重启应用，以及确保您的设备符合推荐的系统要求。'}],ABOUTUS:"加载中..."}),T=async()=>{try{console.log("开始获取配置...");const o=await window.pywebview.api.get_config();return console.log("获取到的配置:",o),i.value=o,document.documentElement.style.setProperty("--primary-color",o.GUI_COLORS),console.log("配置已更新:",i.value),!0}catch(o){return console.error("获取配置失败:",o),i.value.GUI_NAME="配置加载失败",!1}},me={class:"pywebview-drag-region"},_e={class:"title-bar"},fe={class:"left-controls-container"},ye={class:"navigation-arrows"},he={class:"window-title"},be={class:"window-controls-right"},Ae=x({__name:"header",props:{hasToggleView:{type:Boolean,default:!1}},emits:["navigatePrevious","navigateNext","toggleView"],setup(o,{emit:s}){const d=q("appConfig",{GUI_NAME:"应用名称",GUI_VERSION:"1.0.0",BRANDNAME:"Brand"}),a=s,m=()=>{console.log("最小化窗口"),pywebview.api.log("info","最小化窗口"),pywebview.api.minimize()},v=()=>{console.log("切换全屏"),pywebview.api.log("info","切换全屏"),pywebview.api.toggle_fullscreen()},R=()=>{console.log("关闭窗口"),pywebview.api.log("info","关闭窗口"),pywebview.api.destroy()},w=()=>{a("navigatePrevious")},_=()=>{a("navigateNext")},g=()=>{a("toggleView")};return($,N)=>{const f=B;return y(),S("div",me,[e("div",_e,[e("div",fe,[e("div",{class:"window-controls-left"},[e("div",{class:"control-btn close",onClick:R}),e("div",{class:"control-btn minimize",onClick:m}),e("div",{class:"control-btn maximize",onClick:v})]),e("div",ye,[e("div",{class:"nav-arrow",onClick:w},[n(f,null,{default:p(()=>[n(r(F))]),_:1})]),e("div",{class:"nav-arrow",onClick:_},[n(f,null,{default:p(()=>[n(r(W))]),_:1})])]),o.hasToggleView?(y(),S("div",{key:0,class:"dot-matrix",onClick:g},N[0]||(N[0]=[J('<div class="dot-row" data-v-a70f5da4><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div></div><div class="dot-row" data-v-a70f5da4><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div></div><div class="dot-row" data-v-a70f5da4><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div><div class="dot" data-v-a70f5da4></div></div>',3)]))):j("",!0)]),e("div",he,A(r(d).GUI_NAME),1),e("div",be,[e("div",{class:"control-icon minimize-icon",onClick:m},[n(f,null,{default:p(()=>[n(r(K))]),_:1})]),e("div",{class:"control-icon maximize-icon",onClick:v},[n(f,null,{default:p(()=>[n(r(Q))]),_:1})]),e("div",{class:"control-icon close-icon",onClick:R},[n(f,null,{default:p(()=>[n(r(Y))]),_:1})])])])])}}}),Se=z(Ae,[["__scopeId","data-v-a70f5da4"]]),Re={class:"app-container"},Ne={class:"app-content"},Ie={class:"pywebview-drag-region"},Ce={class:"sidebar"},Pe={class:"logo-container"},Ue={class:"logo-text"},Ee={class:"nav-items"},Me=["onClick"],$e={class:"sidebar-footer"},ke={class:"slogan"},Oe={class:"version"},Ve={class:"copyright"},Le={class:"main-content"},De=x({__name:"WebDemoApp",setup(o){const s=X();G("appConfig",i);const d=u(!1);G("pywebviewReady",d);const a=u([]),m=u(0),v=async()=>{if(!window.pywebview||!window.pywebview.api){console.warn("pywebview API未就绪，使用默认菜单配置"),a.value=[{name:"参数设置",route:"common",type:"menu"}];return}try{const l=await window.pywebview.api.get_gui_config();if(l&&l.menus&&Array.isArray(l.menus)){const t=l.menus.map((c,P)=>({name:c.name,help:c.help,route:`dynamic-${P}`,type:c.type||"menu"}));a.value=t,console.log("动态菜单配置加载成功:",t)}else console.error("菜单配置格式无效"),a.value=[{name:"参数设置",route:"common",type:"menu"}]}catch(l){console.error("加载菜单配置失败:",l),a.value=[{name:"参数设置",route:"common",type:"menu"}]}},R=l=>{switch(l){case"menu":return D;case"log":return O;case"help":return V;case"about":return L;default:return D}},w=(l,t)=>{var c;t!==void 0&&(m.value=t),l==="about"?s.push("/webdemo-about"):l==="external-program"?s.push("/webdemo-log"):l==="help"?s.push("/webdemo-help"):l.startsWith("dynamic-")?s.push({path:"/webdemo-home",query:{menuIndex:t==null?void 0:t.toString(),menuName:(c=a.value[t||0])==null?void 0:c.name,_t:Date.now().toString()}}):s.push("/webdemo-home")},_=["common","help","faq","external-program","about"];let g=0;const $=()=>{g=(g-1+_.length)%_.length,w(_[g])},N=()=>{g=(g+1)%_.length,w(_[g])},f=()=>{console.log("切换视图模式"),window.pywebview&&window.pywebview.api?window.pywebview.api.log("info","切换视图模式"):console.warn("pywebview API未就绪，无法记录日志")};return window.addEventListener("pywebviewready",()=>{console.log("info","python API 已就绪"),d.value=!0,T().then(()=>{v(),i.value.RUNPARAMS!==!1&&i.value.RUNPARAMS!==null&&i.value.RUNPARAMS!==void 0&&(console.log("检测到RUNPARAMS不为false/null/undefined，自动跳转到运行日志页面"),sessionStorage.setItem("runParams",JSON.stringify(i.value.RUNPARAMS)),M.value=!0,s.push("/webdemo-log"))})}),Z(()=>{console.log("组件已挂载"),window.pywebview&&window.pywebview.api?(console.log("pywebview API 已存在且初始化完成"),d.value=!0,T().then(()=>{v(),i.value.RUNPARAMS!==!1&&i.value.RUNPARAMS!==null&&i.value.RUNPARAMS!==void 0&&(console.log("检测到RUNPARAMS不为false/null/undefined，自动跳转到运行日志页面"),sessionStorage.setItem("runParams",JSON.stringify(i.value.RUNPARAMS)),M.value=!0,s.push("/webdemo-log"))})):(console.log("pywebview API 尚未初始化，等待pywebviewready事件"),a.value=[{name:"参数设置",route:"common",type:"menu"}])}),(l,t)=>{const c=B,P=ee("router-view");return y(),S("div",Re,[n(Se,{onNavigatePrevious:$,onNavigateNext:N,onToggleView:f,hasToggleView:!1}),e("div",Ne,[e("div",Ie,[e("div",Ce,[e("div",Pe,[e("h2",Ue,A(r(i).GUI_NAME),1)]),e("div",Ee,[(y(!0),S(oe,null,te(a.value,(b,U)=>(y(),S("div",{key:U,class:ae(["nav-item",{active:m.value===U}]),onClick:xe=>w(b.route,U)},[n(c,null,{default:p(()=>[(y(),k(ne(R(b.type))))]),_:2},1024),e("span",null,A(b.name),1)],10,Me))),128)),e("div",{class:"nav-item",onClick:t[0]||(t[0]=b=>w("external-program"))},[n(c,null,{default:p(()=>[n(r(O))]),_:1}),t[3]||(t[3]=e("span",null,"运行日志",-1))]),e("div",{class:"nav-item",onClick:t[1]||(t[1]=b=>w("help"))},[n(c,null,{default:p(()=>[n(r(V))]),_:1}),t[4]||(t[4]=e("span",null,"使用帮助",-1))]),e("div",{class:"nav-item",onClick:t[2]||(t[2]=b=>w("about"))},[n(c,null,{default:p(()=>[n(r(L))]),_:1}),t[5]||(t[5]=e("span",null,"应用介绍",-1))])]),e("div",$e,[e("div",ke,A(r(i).GUI_INTRODUCE),1),e("div",Oe,"版本:v"+A(r(i).GUI_VERSION),1),e("div",Ve," © 2025 "+A(r(i).BRANDNAME)+". All rights reserved. ",1)])])]),e("div",Le,[(y(),k(P,{key:l.$route.fullPath}))])])])}}}),Ge=z(De,[["__scopeId","data-v-1236b262"]]),Te=se({history:ie(),routes:[{path:"/",redirect:"/webdemo-home"},{path:"/webdemo-home",component:()=>I(()=>import("./DynamicForm-Cks_UIcR.js"),__vite__mapDeps([0,1,2,3,4]))},{path:"/webdemo-help",component:()=>I(()=>import("./HelpPage-BkZq3BWB.js"),__vite__mapDeps([5,1,2,6]))},{path:"/webdemo-about",component:()=>I(()=>import("./AboutPage-Bygn3KBl.js"),__vite__mapDeps([7,1,2,8]))},{path:"/webdemo-log",component:()=>I(()=>import("./LogView-CT6eTb8E.js"),__vite__mapDeps([9,1,2,10,4]))}]}),C=le(Ge);for(const[o,s]of Object.entries(re))C.component(o,s);C.use(de,{locale:ce});C.use(Te);C.mount("#app");export{i as a,H as b,ve as c,we as d,He as e,je as f,qe as g,ze as i,h as l,pe as p,E as r,M as s,ge as t};
